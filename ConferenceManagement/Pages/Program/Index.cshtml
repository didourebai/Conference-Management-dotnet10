@page
@model ConferenceManagement.Pages.Program.IndexModel
@{
    ViewData["Title"] = "Program";
}

<h2>Program</h2>

@if (!Model.Sessions.Any())
{
    <p>No sessions scheduled yet.</p>
}
else
{
    var grouped = Model.Sessions.GroupBy(s => s.StartTime?.Date ?? DateTime.MinValue);
    foreach (var day in grouped)
    {
        <h4 class="mt-3">@((day.Key == DateTime.MinValue) ? "Unscheduled" : day.Key.ToLongDateString())</h4>
        <ul class="list-group mb-3">
            @foreach (var s in day)
            {
                <li class="list-group-item">
                    <a asp-page="/Program/SessionDetails" asp-route-id="@s.Id">@s.Title</a>
                    <div class="small text-muted">@s.StartTime?.ToLocalTime().ToString("g") - @s.EndTime?.ToLocalTime().ToString("t")</div>
                    <div class="small">@s.Speaker?.FirstName @s.Speaker?.LastName â€” @s.Room?.Name</div>
                </li>
            }
        </ul>
    }
}
